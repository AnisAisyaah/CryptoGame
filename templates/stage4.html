<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/static/style.css">
    <script>
        const phi = {{ phi | safe }};
        const e = {{ e | safe }};
        const kCorrect = {{ k_correct | safe }};
    </script>
    <script src="/static/game.js"></script>
</head>
<body>
<div class="container">
    <!-- Timer and diamonds display -->
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <div id="timer">â³ 60s</div>
        <div id="diamonds">ğŸ’ 50</div>
    </div>

    <!-- Progress bar -->
    <div class="progress">
        <div class="progress-bar" style="--progress:100%"></div>
    </div>

    <p>Encrypted: {{ encrypted }}</p>

    <!-- ================= HINT BUTTON ================= -->
    <button type="button" onclick="getHint()">ğŸ’¡ Hint</button>

    <div id="hintBox" style="border:1px solid #ccc; padding:10px; margin:10px;">
        <h4>How to find d:</h4>
        <p>d = (kÏ†(n)+1) Ã· e</p>

        <div>
            <label>Enter k: <input type="number" id="kInput" /></label>
            <button type="button" onclick="tryK()">Try k</button>
        </div>

        <div id="hintSteps" style="margin-top:10px;"></div>
    </div>
    <!-- =============================================== -->

    <form method="post" id="decryptForm">
        <input name="d" type="number" placeholder="Private key d" required><br>
        <button>DECRYPT</button>
    </form>

    {% if success %}
        <p class="success">ğŸ‰ {{ decrypted }}</p>
        <p>â± {{ time_taken }} seconds</p>
        <form method="post" action="/save_score">
            <input name="name" placeholder="Your name" required>
            <button>SUBMIT SCORE</button>
        </form>
    {% endif %}

    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}
</div>

<script>
    // Removed leave-page warning entirely
</script>

</body>
</html>
